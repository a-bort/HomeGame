extends layout

block content
    script(type="text/javascript" src="/javascripts/controllers/joinGameController.js")
    div(ng-controller="JoinGameController" ng-init="initWithGame(#{JSON.stringify(game)}, #{JSON.stringify(userAttending)}, #{JSON.stringify(autoJoin)}, #{JSON.stringify(user)})")
        div(ng-if="activeGame")
          div.row
            div.col-md-12
              h2.content-head Game Info
          div.row
            div.col-md-6
              div.game-grid
                div.game-grid-subhead {{activeGame.owner.displayName}}'s {{activeGame.stakes}}, {{activeGame.gameType}} {{activeGame.gameFormat}}
                div
                  span.strong-text When:
                  |{{activeGame.dateString}} @ {{activeGame.timeString}}
                div
                  span.strong-text Where:
                  | {{activeGame.location}}
                div.info-body.multi-line {{activeGame.notes}}
                div(ng-show="!activeGame.pastGame")
                  button.pure-button.pure-button-primary#join-button(ng-click="join()" ng-disabled="userAttending") {{joinButtonText()}}
                  button.pure-button.pure-button-primary#cancel-button(ng-click="cancel()" ng-show="userAttending") Cancel Reservation
                div(ng-show="activeGame.pastGame")
                  button.pure-button.button-error(disabled="true") Registration Closed
              div.drop-md(ng-show="!activeGame.pastGame")
                div.small-text.strong-text Want to invite a friend?
                div.small-text Simply send them the url of this page. However, know that the game owner can kick them if they so choose.
              
            div.col-md-6
              div.game-grid
                div.game-grid-subhead Current Roster ({{activeGame.emptySeats}}&nbsp;/&nbsp;{{activeGame.seats}} Seats Remaining)
                div.roster-seat(ng-repeat="seat in activeGame.seatCollection | filter:filledSeatFilter")
                  div.roster-image
                    img(ng-src="{{seat.user.imageUrl}}")
                  div.roster-name {{seat.user.displayName}}
                    button.pure-button.button-error.button-xsmall.left-lg(ng-hide="!currentUserIsOwner || seat.user._id == currentUserId || activeGame.pastGame", ng-click="kick(seat.user._id)") X
              div.game-grid(ng-hide="emptySeats()")
                div.game-grid-subhead Waitlist
                div.roster-seat(ng-repeat="seat in activeGame.waitListCollection | orderBy: 'created'")
                  div.roster-image
                    img(ng-src="{{seat.user.imageUrl}}")
                  div.roster-name {{seat.user.displayName}}
              //div.game-grid(ng-show="currentUserIsOwner")
                div.game-grid-subhead Add Players from Player Pool
                div.roster-seat(ng-repeat="player in currentUser.playerPool")
                  
