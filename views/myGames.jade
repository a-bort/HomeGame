extends layout

block content
  script(type="text/javascript" src="/javascripts/controllers/myGamesController.js")
  div(ng-controller="MyGamesController", ng-init="initWithGames(#{JSON.stringify(ownedGames)}, #{JSON.stringify(playerGames)}, #{JSON.stringify(waitlistedGames)})")
    div.pure-g
      div.pure-u-3-5
        div.game-list
          h2.content-head 
            | Upcoming Games
          div.game-grid(ng-repeat="game in playerGames")
            div.pure-g
              div.pure-u-12-24
                div.game-grid-top-left.game-grid-subhead {{game.owner.displayName}}'s {{game.stakes}} {{game.gameType}} {{game.gameFormat}}
                div.game-grid-bottom-left {{game.dateString}} @ {{game.timeString}}
              div.pure-u-6-24
                div.info-content
                  div.info-header Game Info
                  div.info-body
                    div {{game.filledSeats}} / {{game.seats}} Seats Filled
                    div {{game.notes}}
              div.pure-u-6-24
                div.game-grid-top-right
                  button.pure-button.game-grid-button(href="#" ng-click="$parent.viewGame(game)") View 
                div.game-grid-bottom-right
                  button.pure-button.game-grid-button(href="#" ng-click="$parent.leaveGame(game)") Cancel                
          div.game-grid.empty-game-grid(ng-show="noPlayerGames()")
            div.game-grid-subhead You have no upcoming games.
            a(href="#") How do I join a game?
        div.game-list
          h2.content-head 
            span(ng-hide="noWaitlistedGames()") Waitlisted Games
          div.game-grid.waitlist-grid(ng-repeat="game in waitlistedGames")
            div.pure-g
              div.pure-u-12-24
                div.game-grid-top-left.game-grid-subhead {{game.owner.displayName}}'s {{game.stakes}} {{game.gameType}} {{game.gameFormat}}
                div.game-grid-bottom-left {{game.dateString}} @ {{game.timeString}}
              div.pure-u-6-24
                div.info-content
                  div.info-header Game Info
                  div.info-body
                    div {{game.filledSeats}} / {{game.seats}} Seats Filled
                    div {{game.notes}}
              div.pure-u-6-24
                div.game-grid-top-right
                  button.pure-button.game-grid-button(href="#" ng-click="$parent.viewGame(game)") View 
                div.game-grid-bottom-right
                  button.pure-button.game-grid-button(href="#" ng-click="$parent.leaveGame(game)") Cancel                
      div.pure-u-2-5
        h2.content-head
          | Hosted Games
        div.game-grid(ng-repeat="game in ownedGames")
          div.pure-g
            div.pure-u-2-3
              div {{game.dateString}} @ {{game.timeString}}
              div.pure-g
                div.pure-u-1-2 {{game.filledSeats}} / {{game.seats}} Seats Filled
                div.pure-u-1-2
                  a(href="{{game.joinGameUrl}}") View Game Page
            div.pure-u-1-3
              div
                a(href="{{game.editGameUrl}}") Edit Game Info
              div
                a(href="#" ng-click="$parent.copyUrl(game)") Copy Game URL       
        div.game-grid.empty-game-grid(ng-show="noOwnedGames()")
            div.game-grid-subhead You are not hosting any games.
            a(href="#") How do I host a game?